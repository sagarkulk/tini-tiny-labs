<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Google Analytics 4 -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=G-QVYWG4B7B3"
		></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			// SPA pageviews sent manually via RouteChangeTracker
			gtag("config", "G-QVYWG4B7B3", { send_page_view: false });
		</script>

		<!-- Restore SPA route BEFORE React mounts (GitHub Pages 404 shim) -->
		<script>
			(function () {
				var p = new URLSearchParams(window.location.search).get("p");
				if (p) {
					history.replaceState(null, "", p);
				}
			})();
		</script>

		<!-- Apply theme BEFORE first paint to avoid white flash -->
		<script>
			try {
				var saved = localStorage.getItem("theme");
				var theme =
					saved === "light" || saved === "dark"
						? saved
						: window.matchMedia &&
							window.matchMedia("(prefers-color-scheme: dark)").matches
						? "dark"
						: "light";

				var root = document.documentElement;
				root.setAttribute("data-theme", theme);
				root.style.backgroundColor = theme === "dark" ? "#1F2937" : "#F8FAFC";
				root.style.colorScheme = theme === "dark" ? "dark" : "light";

				var meta =
					document.querySelector('meta[name="theme-color"]') ||
					document.createElement("meta");
				meta.name = "theme-color";
				meta.content = theme === "dark" ? "#1F2937" : "#ffffff";
				if (!meta.parentNode) document.head.appendChild(meta);

				// Disable transitions during the very first paint
				root.classList.add("no-transitions");
				requestAnimationFrame(function () {
					root.classList.remove("no-transitions");
				});
			} catch (e) {}
		</script>

		<!-- Minimal CSS to support first-paint stability on mobile -->
		<style>
			.no-transitions *,
			.no-transitions *::before,
			.no-transitions *::after {
				transition: none !important;
				animation: none !important;
			}
			html,
			body,
			#root {
				height: 100%;
			}
		</style>

		<meta name="color-scheme" content="light dark" />
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, viewport-fit=cover"
		/>
		<meta name="mobile-web-app-capable" content="yes" />
		<meta
			name="apple-mobile-web-app-status-bar-style"
			content="black-translucent"
		/>

		<title>Tini-Tiny Labs</title>

		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Icons / Manifest -->
		<link rel="icon" href="%PUBLIC_URL%/favicon.ico" sizes="any" />
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="%PUBLIC_URL%/favicon-32.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="48x48"
			href="%PUBLIC_URL%/favicon-48.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="64x64"
			href="%PUBLIC_URL%/favicon-64.png"
		/>
		<link
			rel="apple-touch-icon"
			sizes="180x180"
			href="%PUBLIC_URL%/favicon-180.png"
		/>
		<link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
	</head>
	<body>
		<div id="root"></div>
		<!-- React bundle injected by the build -->
	</body>
</html>
